<UserControl x:Class="TimeQuestLogDesktopApp.Views.DashboardView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:TimeQuestLogDesktopApp.Views" xmlns:viewmodels="clr-namespace:TimeQuestLogDesktopApp.ViewModels" d:DataContext="{d:DesignInstance Type=viewmodels:DashboardViewModel}"
             mc:Ignorable="d" 
             xmlns:vms="clr-namespace:TimeQuestLogDesktopApp.ViewModels"
             xmlns:views="clr-namespace:TimeQuestLogDesktopApp.Views"
             xmlns:converters="clr-namespace:TimeQuestLogDesktopApp.Converters"
             d:DesignHeight="450" d:DesignWidth="800"
             Background="#121212">
    <UserControl.Resources>
        <converters:BoolToOpacityConverter x:Key="BoolToOpacityConverter"/>
    </UserControl.Resources>
    <Grid>
        <Grid.Resources>
            <DataTemplate DataType="{x:Type vms:HomeViewModel}">
                <views:HomeView />
            </DataTemplate>
            <DataTemplate DataType="{x:Type vms:LibraryViewModel}">
                <views:LibraryView />
            </DataTemplate>
            <DataTemplate DataType="{x:Type vms:SettingsViewModel}">
                <views:SettingsView/>
            </DataTemplate>
        </Grid.Resources>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="200"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>
        <Border 
            Grid.Column="0" 
            Background="{StaticResource SecondaryBrush}" 
            Padding="10">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                <TextBlock 
                    Cursor="Arrow"
                    Text="{Binding Username, FallbackValue='Username'}" 
                    Foreground="{StaticResource TextPrimaryBrush}" 
                    Style="{StaticResource HeaderText}"/>
                <StackPanel Grid.Row="1">
                    <Button x:Name="btnHome" 
                            Content="Game Sessions" 
                            Command="{Binding NavigateToHome}"
                    >
                        <Button.Style>
                            <Style BasedOn="{StaticResource NavButton}" TargetType="Button">
                                <Setter Property="BorderBrush" Value="Transparent" />
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding CurrentDashboardViewModelName}" Value="Home">
                                        <Setter Property="BorderBrush" Value="{StaticResource PrimaryButtonHoverBrush}"/>
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </Button.Style>
                    </Button>
                    <Button 
                        Content="Game Library" 
                        Command="{Binding NavigateToLibrary}"
                    >
                        <Button.Style>
                            <Style BasedOn="{StaticResource NavButton}" TargetType="Button">
                                <Setter Property="BorderBrush" Value="Transparent" />
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding CurrentDashboardViewModelName}" Value="Library">
                                        <Setter Property="BorderBrush" Value="{StaticResource PrimaryButtonHoverBrush}"/>
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </Button.Style>
                    </Button>
                    <Button x:Name="btnSettings" 
                            Content="Settings" 
                            Command="{Binding NavigateToSettings}"
                    >
                        <Button.Style>
                            <Style BasedOn="{StaticResource NavButton}" TargetType="Button">
                                <Setter Property="BorderBrush" Value="Transparent" />
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding CurrentDashboardViewModelName}" Value="Settings">
                                        <Setter Property="BorderBrush" Value="{StaticResource PrimaryButtonHoverBrush}"/>
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </Button.Style>
                    </Button>
                </StackPanel>
                <StackPanel Grid.Row="2">
                    <Button x:Name="btnSync"
                        Command="{Binding SyncData}"
                        Margin="0,20,0,0"
                        IsEnabled="{Binding IsSyncButtonEnabled}"
                        Opacity="{Binding IsSyncButtonEnabled, Converter={StaticResource BoolToOpacityConverter}}"
                    >
                        <StackPanel Orientation="Horizontal" Margin="5,0,0,0">
                            <TextBlock Text="Sync" Margin="0 0 10 0"/>
                            <Image Source="/Resources/SyncIcon.png" 
                           Height="20" 
                           Width="20" 
                           Margin="0,0,5,0"
                           />
                            <TextBlock Foreground="{StaticResource TextPrimaryBrush}" Text="{Binding NumberUnsynced}" />
                        </StackPanel>
                        <Button.Style>
                            <Style BasedOn="{StaticResource NavButton}" TargetType="Button">
                                <Setter Property="BorderBrush" Value="Transparent" />
                            </Style>
                        </Button.Style>
                    </Button>

                    <Button x:Name="btnSignOut"
                            Content="Sign Out"
                            Command="{Binding SignoutCommand}"
                            Margin="0,20,0,0"
                            Style="{StaticResource DangerButton}"
                           >
                    </Button>
                </StackPanel>
            </Grid>
        </Border>
        <ContentControl
            Grid.Column="1" 
            Content="{Binding CurrentDashboardViewModel}"/>

    </Grid>
</UserControl>
